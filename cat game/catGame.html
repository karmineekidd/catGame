<canvas id="gameCanvas" width="1650" height="900" style="border: 3px solid black;"></canvas>

<script>
	var sky = new Image();
	sky.src = "sky.png";
	var trees = new Image();
	trees.src = "trees.png";
	var firstGrass = new Image();
	firstGrass.src = "firstGrass.png";
	var secondGrass = new Image();
	secondGrass.src = "secondGrass.png";
	
	var cat = new Image();
	cat.src = "pixelCat.png";
	
	var little = new Image();
	little.src = "littleGuy.png";
	var big = new Image();
	big.src = "bigGuy.png";
	
	var rock = new Image();
	rock.src = "bigRock.png";
	var bush = new Image();
	bush.src = "bush.png";
	
	
	var skyX = 0;	
	var skyY = 0;
	var skyWidth = 1650;
	var skyHeight = 900;
	
	var treesX = 0;	
	var treesY = 0;
	var treesWidth = 1650;
	var treesHeight = 900;

	var firstGrassX = 0;	
	var firstGrassY = 630;
	var firstGrassWidth = 3300;
	var firstGrassHeight = 280;
	
	var secondGrassX = 3300;	
	var secondGrassY = 630;
	var secondGrassWidth = 3300;
	var secondGrassHeight = 280;
	
	
	var catX = 50;	
	var catY = 550;
	var catWidth = 280;
	var catHeight = 180;
	
	var catVertSpeed = 0
	
	
	var littleX = 64;	
	var littleY = 610;
	var littleWidth = 128;
	var littleHeight = 128;
	
	var bigX = 300;	
	var bigY = 520;
	var bigWidth = 256;
	var bigHeight = 256;
	
	
	var rockX = 900;	
	var rockY = 520;
	var rockWidth = 256;
	var rockHeight = 256;
	
	var bushX = 600;	
	var bushY = 620;
	var bushWidth = 128;
	var bushHeight = 128;
	
	var gravity = 2;
	var isGameRunning = true;
	var distance = 0;
	
	var skycolour = "#060d29";
	
	
	window.onload = function() {
		canvas = document.getElementById('gameCanvas');
		canvasContext = canvas.getContext('2d');
		canvasContext.imageSmoothingEnabled = false;
		
		setInterval(mainLoop, 1000 / 60); 
	}
	
	function mainLoop(){
		if (isGameRunning) {
			draw();
			update();
		}
	}
	
	
	function draw(){
		canvasContext.drawImage(sky, skyX, skyY, skyWidth, skyHeight);
		canvasContext.drawImage(trees, treesX, treesY, treesWidth, treesHeight);
		canvasContext.drawImage(firstGrass, firstGrassX, firstGrassY, firstGrassWidth, firstGrassHeight);
		canvasContext.drawImage(secondGrass, secondGrassX, secondGrassY, secondGrassWidth, secondGrassHeight);
		
		canvasContext.drawImage(cat, catX, catY, catWidth, catHeight);
	
		//canvasContext.drawImage(little, littleX, littleY, littleWidth, littleHeight);
		//canvasContext.drawImage(big, bigX, bigY, bigWidth, bigHeight);
		
		//canvasContext.drawImage(rock, rockX, rockY, rockWidth, rockHeight);
		canvasContext.drawImage(bush, bushX, bushY, bushWidth, bushHeight);
		
		canvasContext.fillStyle = "rgba(255,255,255,0.5)";
		canvasContext.fillRect(1400, 10, 160, 60);
	
		
		canvasContext.font = "60px Arial";
		canvasContext.fillStyle = "black";
		canvasContext.fillText(distance, 1400, 60);
	}
	
	
	function update(){
		distance += 1;
		
		firstGrassX -= 6;
		secondGrassX -= 6;
		
		if (firstGrassX < -3300){
			firstGrassX = 3300;
		}
		
		if (secondGrassX < -3300){
			secondGrassX = 3300;
		}
		
		treesX -= 6;
		if (treesX < -100){
			treesX = 1650;
		}
		
		bushX -= 6;
		if (bushX < -100){
			bushX = 1600;
		}
		
		catVertSpeed += gravity;
	
		catY += catVertSpeed;
		
		if (catY > 550) {
				catY = 550;
				catVertSpeed = 0;
		}

		
		if ( detectCollision(catX, catY, catWidth, catHeight, bushX, bushY, bushWidth, bushHeight) ){
			isGameRunning = false;
		}
	}
    
	
	window.addEventListener('keyup',this.check,false); 
		function check(e) {
			var code = e.keyCode;
			if (code == 38) { 			
				catVertSpeed = -25;
			} else if (code == 32) { 	
				catVertSpeed = -25;
			} else if (code == 39) { 	
				catX += 20;
			} else if (code == 37) { 	
				catX -= 20;
			}
		}
		
		window.addEventListener('keyup',this.restart,false); 
		function restart(e) {
			var code = e.keyCode;
			if (code == 82) {
				isGameRunning = true;
				distance = 0;
				catX = 50;
				bushX = 1100;
			}
		}

	
	
	
	function detectCollision(ax, ay, aw, ah, bx, by, bw, bh){
	// Takes details of two objects as parameters and returns true or false whether they collide
	// IMPORTANT object A needs to be the smaller object  (unless they are the same size)
	// @author K Kidd
	// @lastModified 18/08/2023
	// @param	ax	(int)	- The x coordinate of object A
	// @param	ay	(int)	- The y coordinate of object A
	// @param	aw	(int)	- The width of object A
	// @param	ah	(int)	- The height of object A
	// @param	bx	(int)	- The x coordinate of object B
	// @param	by	(int)	- The y coordinate of object B
	// @param	bw	(int)	- The width of object B
	// @param	bh	(int)	- The height of object B
	// @return     (boolean)- true if there is a collision, false if not
		if (ax >= bx && ax <= bx+bw && ay >= by && ay <= by + by+bh) {
			return true;
		}
		if (ax+aw >= bx && ax+aw  <= bx+bw && ay >= by && ay <= by + by+bh) {
			return true;
		}
		if (ax >= bx && ax <= bx+bw && ay+ah >= by && ay <= by + by+bh) {
			return true;
		}
		if (ax+aw  >= bx && ax+aw  <= bx+bw && ay+ah >= by && ay <= by + by+bh) {
			return true;
		}
		console.log(bx + " " + ax + " " + (bx+bw));

		return false
	}
	
	
</script>